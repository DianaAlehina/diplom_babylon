let sphere=[],Max=20,Max3=Max*Max*3,flag=!0,counter=0;const k=8.99,canvas=document.getElementById("renderCanvas"),engine=new BABYLON.Engine(canvas,!0);let scene=new BABYLON.Scene(engine);scene.clearColor=new BABYLON.Color3.Black;const alpha=Math.PI/4,beta=Math.PI/3,radius=70,target=new BABYLON.Vector3(0,0,0),camera=new BABYLON.ArcRotateCamera("Camera",alpha,beta,70,target,scene);camera.attachControl(canvas,!0);const light=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(1,1,0));let particle=[{id:0,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:1,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:2,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:3,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:4,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:5,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:6,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:7,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:8,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:9,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:10,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:11,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:12,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:13,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:14,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:15,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:16,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:17,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:18,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:19,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:20,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:21,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:22,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:23,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:24,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:25,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:26,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:27,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:28,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:29,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:30,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:31,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:32,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:33,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:34,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:35,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:36,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:37,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:38,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:39,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:30,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:31,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:32,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:33,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:34,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:35,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:36,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:37,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:38,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:39,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:40,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:41,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:42,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:43,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:44,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:45,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:46,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:47,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:48,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0},{id:49,xRadius:0,yRadius:0,zRadius:0,xEnd:0,yEnd:0,zEnd:0,xStep:0,yStep:0,zStep:0,diameter:0,mass:0,charge:0,color:0}];const length=50,deltaT=.003;function strengthF(e){let d,a,i,t=0,s=0,r=new Array;for(let d=0;d<e.length;d++){r[d]=new Array;for(let a=0;a<e.length;a++)r[d][a]=[0,0,0]}for(let n=0;n<e.length;n++)for(let p=n+1;p<e.length;p++)t=Math.sqrt(Math.pow(e[p].xRadius-e[n].xRadius,2)+Math.pow(e[p].yRadius-e[n].yRadius,2)+Math.pow(e[p].zRadius-e[n].zRadius,2)),s=k*e[n].charge*e[p].charge/Math.pow(t,3),d=s*(e[p].xRadius-e[n].xRadius),a=s*(e[p].yRadius-e[n].yRadius),i=s*(e[p].zRadius-e[n].zRadius),r[n][p]=[d,a,i],r[p][n]=[-d,-a,-i];return r}function sumStrengthF(e){let d=new Array(50);for(let a=0;a<50;a++){d[a]=new Array(50),d[a][0]=0,d[a][1]=0,d[a][2]=0;for(let i=0;i<50;i++)d[a][0]+=e[a][i][0],d[a][1]+=e[a][i][1],d[a][2]+=e[a][i][2]}return d}function searchAcceleration(e){for(let d=0;d<e.length;d++)for(let a=0;a<e.length;a++)e[d][a]/=particle[a].mass;return e}function searchSpeed(e){let d=new Array(50);for(let a=0;a<e.length;a++){d[a]=new Array(3);for(let i=0;i<e.length;i++)d[a][i]=0,d[a][i]=d[a][i]+.003*e[a][i]}return d}function endPoint(e){for(let d=0;d<e.length;d++)particle[d].xEnd=particle[d].xRadius+.003*e[d][0],particle[d].yEnd=particle[d].yRadius+.003*e[d][1],particle[d].zEnd=particle[d].zRadius+.003*e[d][2],particle[d].xRadius=particle[d].xEnd,particle[d].yRadius=particle[d].yEnd,particle[d].zRadius=particle[d].zEnd;return""}function randomParticle(e){let d;for(let a=0;a<e.length;a++){e[a].xRadius=Math.random()*Max,e[a].yRadius=Math.random()*Max,e[a].zRadius=Math.random()*Max,e[a].charge=Math.random()*Max/2;let i=Math.floor(3*Math.random());0===i?(e[a].diameter=1,e[a].mass=1,d=new BABYLON.StandardMaterial("myMaterial",scene),d.diffuseColor=new BABYLON.Color3(1,0,0)):1===i?(e[a].diameter=1.5,e[a].mass=1.5,d=new BABYLON.StandardMaterial("myMaterial",scene),d.diffuseColor=new BABYLON.Color3(0,1,0)):(e[a].diameter=2,e[a].mass=2,d=new BABYLON.StandardMaterial("myMaterial",scene),d.diffuseColor=new BABYLON.Color3(0,0,1)),sphere[a]=BABYLON.Mesh.CreateSphere("sphere",32,e[a].diameter,scene),sphere[a].position.x=e[a].xRadius,sphere[a].position.y=e[a].yRadius,sphere[a].position.z=e[a].zRadius,sphere[a].material=d}return e}particle=randomParticle(particle),engine.runRenderLoop((function(){strength=strengthF(particle),endPoint(searchSpeed(searchAcceleration(sumStrengthF(strength))));for(let e=0;e<particle.length;e++)sphere[e].position.x=particle[e].xEnd,sphere[e].position.y=particle[e].yEnd,sphere[e].position.z=particle[e].zEnd;scene.render()}));